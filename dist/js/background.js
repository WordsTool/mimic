(()=>{"use strict";const e=[{id:"qPWzha",name:"Cambridge",url:"https://dictionary.cambridge.org/dictionary/english/{{phrase}}"},{id:"lJrlAs",name:"Collins",url:"https://www.collinsdictionary.com/dictionary/english/{{phrase}}"},{id:"XhVTIJ",name:"Vocabulary",url:"https://www.vocabulary.com/dictionary/{{phrase}}"},{id:"eNeNVw",name:"MacMillan",url:"https://www.macmillandictionary.com/dictionary/british/{{phrase}}"},{id:"7grJ1s",name:"Merriam Webster",url:"https://www.merriam-webster.com/dictionary/{{phrase}}"},{id:"KiugJU",name:"Longman",url:"https://www.ldoceonline.com/dictionary/{{phrase}}"},{id:"MK88n2",name:"Oxford",url:"https://www.oxfordlearnersdictionaries.com/spellcheck/english/?q={{phrase}}"},{id:"xiQog2",name:"Dictionary",url:"https://www.dictionary.com/browse/{{phrase}}"}];const t=function(){function e(e){var t=e.listen;this.extensionId=chrome.runtime.id,this.listeners=t?function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(t):[],this.subscribeToRuntime()}return e.prototype.onRuntimeMessage=function(e,t,n){if(console.log("on message: ",{message:e,sender:t}),t.id===this.extensionId&&"object"==typeof e){var r=t.tab,o=e.type,i=e.data;this.listeners.filter((function(e){return e.type===o})).forEach((function(e){(0,e.controller)({tabId:r?r.id:null,data:i,sendResponse:n})}))}},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.subscribeToRuntime=function(){var e=this;chrome.runtime.onMessage.addListener((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.onRuntimeMessage.apply(e,t)}))},e.prototype.request=function(e,t,n){chrome.runtime.sendMessage(this.extensionId,{type:e,data:t},n)},e.prototype.sentToTabs=function(e){chrome.tabs.query({},(function(t){t.forEach((function(t){var n=t.id;chrome.tabs.sendMessage(n,e)}))}))},e}();console.log(chrome.runtime.onMessage.addListener);var n=function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r={disabled:!0,dictionaries:e,ui:{panel:"left",tail:{horizontal:"left",vertical:"center"}}},o={pinned:!1,phrase:""},i=e.map((function(e){return{id:e.id,off:!1}}));console.log(i);var s={},a=new t({listen:[{type:"get_tab_settings",controller:function(e){var t=e.tabId,i=e.sendResponse;if(t){var a=s[t]||{};i(n(n(n({},o),a),r))}}},{type:"update_tab_settings",controller:function(e){var t=e.tabId,r=e.data;if(t){var o=s[t]||{};s[t]=n(n({},o),r)}}},{type:"update_common_settings",controller:function(e){console.log(e.data),Object.assign(r,e.data),a.sentToTabs({type:"sync_tab_common_settings",data:r})}},{type:"get_common_settings",controller:function(e){e.sendResponse(r)}}]})})();